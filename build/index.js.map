{"version":3,"sources":["../code/index.es6"],"names":["FB","setAccessToken","loadPosts","api","response","then","db","postsCollection","collection","insert","data","err","result","console","log","loadComments","find","toArray","documents","error","commentsCollection","totalResponses","fetchCommentsAndSave","id","length","each"],"mappings":";;AAEA;;AACA;;AACA;;;;;;AAIA,IAAIA,KAAI,iBAAa,EAAb,CAAR,C,CARA;;AAWAA,GAAGC,cAAH,CAAkB,8CAAlB;;AAIA,SAASC,SAAT,GAAoB;AAClB,SAAOF,GAAGG,GAAH,CAAO,uBAAP,EAAgC,UAACC,QAAD,EAAa;AAClD,oBAAYC,IAAZ,CAAiB,UAACC,EAAD,EAAM;AACrB,UAAIC,kBAAkBD,GAAGE,UAAH,CAAc,OAAd,CAAtB;AACAD,sBAAgBE,MAAhB,CAAuBL,SAASM,IAAhC,EAAsC,UAACC,GAAD,EAAMC,MAAN,EAAgB;AACpDC,gBAAQC,GAAR,CAAYF,MAAZ;AACD,OAFD;AAGD,KALD;AAMD,GAPM,CAAP;AAQD;;AAED,SAASG,YAAT,GAAuB;AACrB,kBAAYV,IAAZ,CAAiB,UAACC,EAAD,EAAM;AACrB,QAAIC,kBAAkBD,GAAGE,UAAH,CAAc,OAAd,CAAtB;AACAD,oBAAgBS,IAAhB,GAAuBC,OAAvB,CAA+B,UAACN,GAAD,EAAMO,SAAN,EAAkB;AAC/C,UAAGP,GAAH,EAAO;AACLE,gBAAQM,KAAR,CAAc,uBAAd;AACA;AACD,OAHD,MAGO;AAAA;AACL,cAAIC,qBAAqBd,GAAGE,UAAH,CAAc,UAAd,CAAzB;AACA,cAAIa,iBAAiB,CAArB;AACA,cAAIC,uBAAuB,SAAvBA,oBAAuB,CAAUJ,SAAV,EAAoB;;AAE7ClB,eAAGG,GAAH,CAAUe,UAAUK,EAApB,gBAAmC,UAACnB,QAAD,EAAa;AAC9CS,sBAAQC,GAAR,CAAY,EAAEO,cAAd;AACA,kBAAGjB,SAASM,IAAT,CAAcc,MAAd,GAAuB,CAA1B,EAA4B;AAC1BJ,mCAAmBX,MAAnB,CAA0BL,SAASM,IAAnC,EAAyC,UAACC,GAAD,EAAMC,MAAN,EAAgB;AACvDC,0BAAQC,GAAR,CAAY,MAAZ;AACAD,0BAAQC,GAAR,CAAYF,MAAZ;AACD,iBAHD;AAID;AACF,aARD;AASD,WAXD;;AAaAC,kBAAQC,GAAR,CAAYI,UAAUM,MAAtB;AACA,2BAAEC,IAAF,CAAOP,SAAP,EAAkBI,oBAAlB;AAjBK;AAkBN;AACF,KAvBD;AAwBD,GA1BD;AA2BD;;AAED","file":"index.js","sourcesContent":["/* jshint esversion: 6 */\n\nimport {Facebook, FacebookApiException} from 'fb';\nimport {closeDb, getDatabase} from './db';\nimport _ from 'lodash';\n\n\n\nvar FB= new Facebook({ });\n\n\nFB.setAccessToken('1661911667402870|QBkaCq53E8pvhw8u16y2yzG3vmo');\n\n\n\nfunction loadPosts(){\n  return FB.api('traversepakistan/feed', (response)=> {\n    getDatabase.then((db)=>{\n      let postsCollection = db.collection('posts');\n      postsCollection.insert(response.data, (err, result) =>{\n        console.log(result);\n      });\n    });\n  });\n}\n\nfunction loadComments(){\n  getDatabase.then((db)=>{\n    let postsCollection = db.collection('posts');\n    postsCollection.find().toArray((err, documents)=>{\n      if(err){\n        console.error(\"Unable to fetch posts\");\n        return ;\n      } else {\n        let commentsCollection = db.collection('comments');\n        let totalResponses = 0;\n        let fetchCommentsAndSave = function (documents){\n\n          FB.api(`${documents.id}/comments`, (response) =>{\n            console.log(++totalResponses);\n            if(response.data.length > 0){\n              commentsCollection.insert(response.data, (err, result) =>{\n                console.log(\"here\");\n                console.log(result);\n              });\n            }\n          });\n        };\n\n        console.log(documents.length);\n        _.each(documents, fetchCommentsAndSave);\n      }\n    });\n  });\n}\n\n//loadComments();\n"]}